Next: integration of User, Profile, FinancialProfile, Loan, Schedule, Payment models into the system.
-------------------------------------------------------------
CHECK EVERY PART OF THE SYSTEM IN ISOLATION:

(All files in here are created. The ones with the cross are not yet tested)

C:.
â”‚   index.mjs
â”‚
â”œâ”€â”€â”€actors
â”‚   â”œâ”€â”€â”€auth
â”‚   â”‚       extractToken.js (âœ…).
â”‚   â”‚       tokenExists.js (âœ…)
â”‚   â”‚       validatePayloadStrcture.js (âœ…)
â”‚   â”‚       verifyPassword.js (âœ…)
â”‚   â”œâ”€â”€â”€financialProfile
â”‚   â”‚       updateFinancialProfileFields.js (âŒ)
â”‚   â”œâ”€â”€â”€loan
â”‚   â”‚       createLoan.js (âŒ)
â”‚   â”‚       generateLoanId.js (âŒ)
â”‚   â”‚       simulateLoan.js (âŒ)
â”‚   â”œâ”€â”€â”€utils
â”‚   â”‚       updateProfileFields.js (âŒ)
â”‚   â”œâ”€â”€â”€retrievers
â”‚   â”‚       userRetriever.js (âœ…)ğŸ”
â”‚   â”‚
â”‚   â”œâ”€â”€â”€utils
â”‚               hasControlChars.js (âœ…)
â”‚               hasEmoji.js (âœ…) 
â”‚               hasWhiteSpaces.js (âœ…)
â”‚               isNotSymbol.js (âœ…)
â”‚   â””â”€â”€â”€validators
â”‚       â””â”€â”€â”€auth
â”‚               checkUserUniqueness.js (âœ…)
â”‚               loginResponse.js (âœ…)
â”‚               validateEmailInput.js (âœ…)
â”‚               validateLoginInput.js (âœ…)
â”‚               validateName.js (âœ…)
â”‚               validatePasswordInput.js (âœ…) 
â”‚               validateRegistrationInput.js (âœ…)
â”‚       â””â”€â”€â”€loan
â”‚               validateLoanInput.js (âŒ)
â”œâ”€â”€â”€config
â”‚       jwtConfig.js (ğŸ”...) âœ…
â”‚       loanConfig.js (âœ…)
â”‚       mock.loans.db.config.js (âŒ)
â”‚       mock.users.db.config.js (âœ…)
â”‚       passwordSecretConfig.js (âœ…)
â”‚       registerData.js (âœ…)
â”‚       userConfig.js (âœ…)
â”‚
â”œâ”€â”€â”€db
â”‚       pool.js (âŒ)
â”œâ”€â”€â”€controllers
â”‚       authController.mjs (
          âœ…registerUserController(),
          âœ…loginUserController()
          ) 
â”‚       financialProfileController.mjs (âŒ)
â”‚       loanController.mjs (âœ…)
â”‚       profileController.mjs (âœ…) 
â”‚
â”œâ”€â”€â”€entities
â”‚       financialProfileEntity.js (âŒ)
â”‚       loanEntity.js (âŒ)
â”‚       paymentEntity.js (âŒ)
â”‚       profileEntity.js (âŒ)
â”‚       scheduleEntity.js (âŒ)
â”‚       userEntity.js (âœ…)
â”‚
â”œâ”€â”€â”€errors
â”‚       AppError.js (âœ…)
â”‚       src\errors\authErrors.js (âœ…)
â”‚       errorRegistry.js (âœ…) 
â”‚       loanErrors.js (âŒ) 
â”‚       mapError.js (âœ…)
â”‚       profileErrors.js (âœ…)
â”‚       registrationErrors.js (âœ…)
â”‚       tokenError.js (âœ…)
â”‚       TokenGenerationError.js (âœ…)
â”‚
â”œâ”€â”€â”€middlewares
â”‚       authMiddleware.js (
            âœ…tokenExists() (lives in token.js)
            âœ…extractToken() 
            âœ…verifyToken() 
            âœ…decodePayload() (lives in token.js)
            âœ…isTokenExpired
        ) âœ…
â”‚       errorHandler.js (âœ…)
â”‚
â”œâ”€â”€â”€models
â”‚       financialProfileModel.js (âŒ)
â”‚       loanModel.js (âœ…)
â”‚       paymentModel.js (âœ…)
â”‚       profileModel.js (âœ…)
â”‚       scheduleModel.js (âœ…)
â”‚       userModel.js (âœ…)
â”‚
â”œâ”€â”€â”€repositories
â”‚       loanRepository.js (âŒ)
â”‚       userRepo.js (
  âœ…findUserByEmail
  âœ…findUserById
  âœ…saveUser
  âœ…listUsers 
  âœ…deleteUser
   5 inner functions)
â”‚
â”œâ”€â”€â”€routes
â”‚   â”œâ”€â”€â”€auth
â”‚   â”‚       auth.route.js (âŒ)(in order to test this it is necessary to connect the methods to a real database.)
â”‚   â”œâ”€â”€â”€financialProfile
â”‚   â”‚       financialProfile.route.js (âŒ) (in order to test this it is necessary to connect the methods to a real database.)
â”‚   â”œâ”€â”€â”€loan
â”‚   â”‚       loanRoutes.js (âŒ) (in order to test this it is necessary to connect the methods to a real database.)
â”‚   â”‚
â”‚   â””â”€â”€â”€profile
â”‚           profile.route.js (âŒ) (in order to test this it is necessary to connect the methods to a real database.)
â”‚
â”œâ”€â”€â”€services
â”‚   â”œâ”€â”€â”€auth
â”‚   â”‚       registerUser.mjs (âœ…)
â”‚   â”‚
â”‚   â”œâ”€â”€â”€loan
â”‚   â”‚       loanCalculator.js (
  âŒ calculateRepaymentCapacity ğŸ”
  âœ…calculateMaxLoanCapacity
  âœ…calculateCompoundInterest
  âœ…fixedPaymentCalculation 
  âœ…generateAmortizationSchedule
  âœ…calculateInterestSaving
  âœ…applyEarlyRepayment
  )
â”‚   â”‚
â”‚   â””â”€â”€â”€user
â”‚           generateUserId.js (âœ…)
â”‚           user.service.js (âœ…)
â”‚
â”œâ”€â”€â”€tests
â”‚
â””â”€â”€â”€utils
    â””â”€â”€â”€auth
            comparePasswords.js (âœ…) 
            generateSignature.js (âœ…)
            hashPassword.js (âœ…)
            invalidateUserToken.js (âœ…)
            refreshToken.js (âœ…)
            token.js (
              âœ…tokenExists
              âœ…verifyToken
              âœ…decodePayload
              âœ…isTokenExpired 
              ) 
            tokenIssuer.js (âœ…)
            verifyToken.js (âœ…)



-----------------------------------------------------------------------WORKSPACE
TRELLO:https://trello.com/b/9ty2CCja/finance-advisor
--------------
MIRO:https://miro.com/welcomeonboard/WDh1Uy9JWlRjZUJQYkJuaS9wV2l2clVhbE1SVk5FVlVCbk1YSUVLRFhFY2VCdjUyN0h1VVdmNEZ0VFpxVGEwcHNDRjRvM3VHR3l4cUpoREdmRkFjdFp6b3R5dlZINCtLenBvV2s5WFlYb1Nmd0lRaGpVSVBlYkNCOStsZEtleVZyVmtkMG5hNDA3dVlncnBvRVB2ZXBnPT0hdjE=?share_link_id=208190572952
-----------------------------------------------------------------------DAY'S BACKLOG

- Use POSTMAN for register attempt [âœ…]
- Use POSTMAN for login attempt [âœ…]
- Use POSTMAN for secured routes access attempt [âœ…]

Please make sure that before each testing case actors are pure as much as possible. 
  +registerController[âœ…]
  +loginController[âœ…]

- CHECK TESTCASES:
  + TC-001 [] -> Valid registration -> login -> access to protected route.
    -> Input / Preconditions:
      + Purify actors as much as possible [solved]
    -> Actor: AuthService (encapsulation needed because AuthService is missing)
    -> Expected result: 200 OK + resource data.
    -> Status: Pending.
    RESULTS:
      -ERROR WHEN TRYING TO REGISTER WITH THE SAME INPUT MORE THAN ONCE
        ~check what happens when find an existing email in registering process [solved]
  + TC-002 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-003 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-004 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-005 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-006 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-007 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-008 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-009 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-010 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-011 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-012 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
  + TC-013 [] ->
    -> Input / Preconditions:
    -> Actor:
    -> Expected result:
    -> Status:
--------------

-----------------------------------------------------------------------COURSE TASKS (must)

  1-GITHUB REPOSITORY (
    +Table of contents
      *Overview (âœ…)
      *Description (âœ…)
      *ERD (erd âœ…, add it to the github REPOSITORY's content)
  )

  2-Implement authentication in your application.
    Assignment: Choose and implement one of the authentication methods we covered in class:
      -JWT (JSON Web Tokens) (chosen)
      -OAuth 2.0
    Important: You must implement the authentication logic from scratch without using ready-made 
      authentication libraries. This will help you understand how these protocols 
      work under the hood. (login process âŒ)
  3-Create DB schema as diagram. In your application u should have at list 3 DB tables.
  4-Your task is to implement the database you designed in your diagram by creating executable SQL scripts.
    It can be any SQL database. If you don't know which to use - I recommend to use PostgreSQL.
    Requirements:
      4.1-Create a comprehensive SQL script (.sql file) that generates all tables, relationships, indexes,
        and constraints from your database diagram
--------------

-----------------------------------------------------------------------CORE FEATURES
ğŸ—‚ï¸ Suggested Categorization
    âœ… Core Logic
        -Basic loan calculation (âœ…)
        -Monthly payment calculation (âœ…)
        -Total repayment amount (âœ…)
        -Compound interest logic (âœ…)
        -Amortization schedule (âœ…)
        -Early repayment logic (âœ…)
        -Input validation (check)
--------------

-----------------------------------------------------------------------NOT CORE FEATURES
--------------
Notes:
- Test that CRUD functinalities are working for loan entity.
- The only entity that already has the CRUD is loans, the entire others also need it. So that is pending...
- Test that all CRUD functions are working for every entity.
.

ğŸ§­ Roadmap mÃ­nimo funcional extendido (4 dÃ­as)
ğŸŸ¢ DÃ­a 1: Persistencia y validaciÃ³n de prÃ©stamos
âœ… Completado

ğŸŸ¡ DÃ­a 2: Lectura y consulta + CRUD de usuarios
ğŸ“„ Loans
[x] Repositorio getLoanById(id)

[x] Repositorio getLoans() ordenado por savedAt

[x] Test getLoanById() vÃ¡lido e invÃ¡lido

[x] Test getLoans() incluye prÃ©stamo guardado

ğŸ‘¤ Users
[ ] Tabla users con id, email, name, created_at

[ ] Repositorio saveUser(), getUserById()

[ ] Actor validateUserInput()

[ ] Test saveUser() vÃ¡lido e invÃ¡lido

[ ] Test getUserById() vÃ¡lido e inexistente

ğŸ”µ DÃ­a 3: ActualizaciÃ³n y eliminaciÃ³n + CRUD de perfiles y pagos
ğŸ“„ Loans
[x] Repositorio updateLoan(id, updates) con validaciÃ³n

[x] Repositorio deleteLoan(id) con DELETE real

[x] Test updateLoan() vÃ¡lido e invÃ¡lido

[x] Test deleteLoan() efectivo e idempotente

ğŸ§¾ Financial Profiles
[ ] Repositorio updateFinancialProfile(id, updates)

[ ] Test updateFinancialProfile() vÃ¡lido e invÃ¡lido

ğŸ’³ Payments
[ ] Tabla payments con id, loan_id, amount, paid_at

[ ] Repositorio savePayment(), getPaymentsByLoan()

[ ] Actor validatePaymentInput()

[ ] Test savePayment() vÃ¡lido e invÃ¡lido

[ ] Test getPaymentsByLoan() incluye pago guardado

ğŸŸ£ DÃ­a 4: Modularidad final + CRUD de schedules
ğŸ§© Helpers y actores
[x] Actor createMockFinancialProfile()

[x] Actor generateLoanId() y generateFinancialProfileId()

[x] Refactor de tests con beforeAll y helpers

[ ] createMockLoan() para setup completo

[ ] validateLoanUpdate() para updates parciales

[ ] generateValidUser(), generateValidPayment(), etc.

ğŸ“… Schedules
[ ] Tabla schedules con id, loan_id, due_date, expected_amount

[ ] Repositorio saveSchedule(), getScheduleByLoan()

[ ] Actor validateScheduleInput()

[ ] Test saveSchedule() vÃ¡lido e invÃ¡lido

[ ] Test getScheduleByLoan() incluye cronograma

ğŸ¯ Resultado final en 4 dÃ­as
CRUD completo para loan, user, profile, payment, schedule

ValidaciÃ³n modular por entidad

Tests robustos para cada flujo

Helpers para setup DRY y trazable